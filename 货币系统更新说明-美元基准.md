# 🔄 货币系统更新说明 - 美元基准版

## 📋 更新内容

已将多货币系统的**基准货币**从**人民币(CNY)**调整为**美元(USD)**。

---

## ✅ 已完成的调整

### 1. 基准货币变更
- **之前：** 人民币 (CNY) 作为基准
- **现在：** 美元 (USD) 作为基准
- **影响：** 所有价格现在以美元为基准进行转换

### 2. 汇率数据调整
**新的汇率结构（基准: 1 USD）：**

| 货币代码 | 汇率 | 说明 |
|---------|------|------|
| USD | 1.0000 | 基准货币 |
| CNY | 7.20 | 1 USD = 7.20 CNY |
| EUR | 0.92 | 1 USD = 0.92 EUR |
| CAD | 1.40 | 1 USD = 1.40 CAD |
| AUD | 1.54 | 1 USD = 1.54 AUD |
| AED | 3.67 | 1 USD = 3.67 AED |

### 3. API端点更新
- **之前：** `https://api.exchangerate-api.com/v4/latest/CNY`
- **现在：** `https://api.exchangerate-api.com/v4/latest/USD`

### 4. 默认货币调整
- 新用户默认显示：**美元 (USD)**
- 货币切换器默认选中：🇺🇸 USD

### 5. 汇率显示格式
- **之前：** `1 CNY = X.XXXX XXX`
- **现在：** `1 USD = X.XXXX XXX`

---

## 💰 价格转换示例

### 示例产品价格

以 **Velcro魔术贴徽章** 为例：

**原始人民币价格：** ¥1.08-2.95

**转换为美元基准：** $0.15-0.41

**其他货币转换：**
| 货币 | 价格显示 | 计算方式 |
|------|---------|---------|
| 🇺🇸 USD | $0.15-0.41 | 基准价格 |
| 🇨🇳 CNY | ¥1.08-2.95 | USD × 7.20 |
| 🇪🇺 EUR | €0.14-0.38 | USD × 0.92 |
| 🇨🇦 CAD | C$0.21-0.57 | USD × 1.40 |
| 🇦🇺 AUD | A$0.23-0.63 | USD × 1.54 |
| 🇦🇪 AED | د.إ 0.55-1.50 | USD × 3.67 |

---

## 🔄 转换逻辑说明

### 旧系统（CNY基准）
```
人民币价格 ¥100
    ↓
美元: ¥100 × 0.1389 = $13.89
欧元: ¥100 × 0.1285 = €12.85
```

### 新系统（USD基准）
```
美元价格 $100
    ↓
人民币: $100 × 7.20 = ¥720
欧元: $100 × 0.92 = €92
```

### 自动价格转换
系统会自动识别现有的人民币价格（¥开头）并转换为美元：

```javascript
// 识别人民币价格
if (currentText.startsWith('¥')) {
    // ¥1.08 → $0.15 (除以7.2)
    usdPrice = cnyPrice / 7.20;
}
```

---

## 🎨 UI界面变化

### 货币切换器

**默认显示：**
```
┌─────────────┐
│ 🇺🇸 USD ▼  │  ← 默认美元
└─────────────┘
```

**下拉菜单：**
```
┌────────────────────────────┐
│ 选择货币 / Select Currency  │
│ 汇率更新: 10:30            │
├────────────────────────────┤
│ 🇺🇸 US Dollar  USD  基准    │ ← 第一位
│ 🇨🇳 人民币     CNY  7.2000  │
│ 🇪🇺 Euro      EUR  0.9200  │
│ 🇨🇦 CAD       CAD  1.4000  │
│ 🇦🇺 AUD       AUD  1.5400  │
│ 🇦🇪 Dirham    AED  3.6700  │
└────────────────────────────┘
```

---

## 📂 修改的文件

### 核心文件
✅ **`js/currency-converter.js`**
- 第7行: `this.baseCurrency = 'USD'`
- 第11-17行: 货币列表（USD放第一位）
- 第21-28行: 汇率数据（以USD为基准）
- 第34行: API URL改为USD基准
- 第68-74行: 汇率更新逻辑
- 第115行: 默认货币改为USD
- 第174行: 汇率格式化改为USD基准
- 第236-257行: 价格转换逻辑（支持CNY→USD自动转换）

### 无需修改的文件
- ✅ `css/currency-switcher.css` - 样式无需改动
- ✅ `index.html` - 已引用JS，无需改动
- ✅ `products-garment-tags-updated.html` - 无需改动
- ✅ `products-promotional-updated.html` - 无需改动

---

## 🧪 测试验证

### 测试步骤

1. **清除缓存**
   ```javascript
   localStorage.clear(); // 清除之前保存的货币偏好
   ```

2. **刷新页面**
   - 按 `Ctrl + F5` 强制刷新
   - 或打开无痕模式测试

3. **验证默认货币**
   - 应该显示 🇺🇸 USD
   - 价格应该显示美元符号 $

4. **测试货币切换**
   - 切换到人民币 → 价格应乘以7.2
   - 切换到欧元 → 价格应乘以0.92
   - 切换到其他货币验证

5. **验证价格转换**
   - 原来的¥1.08应显示为$0.15
   - 原来的¥7.20应显示为$1.00
   - 价格区间应正确转换

---

## 💡 使用说明

### 对于新用户
- 打开网站默认显示**美元价格**
- 可以手动切换到人民币或其他货币
- 系统会记住您的选择

### 对于老用户
- 如果之前选择了人民币，系统会保持人民币显示
- 可以切换回美元或其他货币
- 建议清除浏览器缓存以使用新的默认设置

### 价格参考
所有产品价格已自动从人民币转换为美元基准：

| 产品 | 原CNY价格 | 新USD价格 |
|------|-----------|-----------|
| Velcro徽章 | ¥1.08-2.95 | $0.15-0.41 |
| 雪尼尔刺绣 | ¥12.96-25.20 | $1.80-3.50 |
| 磁性收纳器 | ¥2.09-4.10 | $0.29-0.57 |
| 豪华眼镜链 | ¥14.26 | $1.98 |

---

## 🔧 开发者注意事项

### JavaScript API
```javascript
// 获取当前基准货币
console.log(currencyConverter.baseCurrency); // 'USD'

// 获取汇率
console.log(currencyConverter.exchangeRates);
// { USD: 1, CNY: 7.20, EUR: 0.92, ... }

// 切换货币
currencyConverter.changeCurrency('CNY');

// 手动更新汇率
currencyConverter.fetchExchangeRates();
```

### 数据属性
HTML元素现在使用 `data-price-usd` 而非 `data-price-cny`：
```html
<span class="price-value" data-price-usd="$0.15-0.41">
  $0.15-0.41
</span>
```

---

## ⚠️ 重要提示

### 1. 价格自动转换
- 系统会自动识别¥开头的价格并转换为美元
- 转换比例：1 USD = 7.20 CNY
- 如果原价格不准确，建议手动更新HTML中的价格

### 2. 汇率更新
- 汇率仍然每小时从API自动更新
- 现在获取的是以USD为基准的汇率
- API失败时使用默认汇率

### 3. 缓存清理
建议清理localStorage以移除旧的货币偏好：
```javascript
// 浏览器控制台执行
localStorage.removeItem('selectedCurrency');
```

---

## 📊 汇率对比表

### CNY → USD 转换参考

| CNY价格 | USD价格 | 转换说明 |
|---------|---------|---------|
| ¥0.72 | $0.10 | ÷ 7.2 |
| ¥1.08 | $0.15 | ÷ 7.2 |
| ¥2.16 | $0.30 | ÷ 7.2 |
| ¥7.20 | $1.00 | ÷ 7.2 |
| ¥14.40 | $2.00 | ÷ 7.2 |
| ¥72.00 | $10.00 | ÷ 7.2 |

---

## ✅ 测试清单

更新后请验证：

- [ ] 打开网站，默认显示美元 (🇺🇸 USD)
- [ ] 货币切换器第一个选项是美元
- [ ] 下拉菜单显示 "基准 / Base" 标识
- [ ] 价格显示美元符号 $
- [ ] 切换到CNY，价格×7.2显示正确
- [ ] 切换到EUR，价格×0.92显示正确
- [ ] 切换到其他货币，转换正确
- [ ] 刷新页面，货币选择被记住
- [ ] 汇率格式显示为 "1 USD = X.XXXX XXX"
- [ ] 所有产品页面价格同步转换
- [ ] 测试页面正常工作

---

## 🎯 快速测试

### 打开测试页面
```
双击：currency-test.html
```

### 验证功能
1. 查看默认货币是否为 🇺🇸 USD
2. 查看价格演示区域的价格是否为美元
3. 切换到人民币，价格应该变大（×7.2）
4. 切换到欧元，价格应该略小（×0.92）
5. 查看汇率信息区域，USD应显示"基准货币"

---

## 📝 更新日志

### v1.1.0 (2024-11-12)
- ✅ 基准货币从CNY改为USD
- ✅ 汇率数据结构调整
- ✅ API端点更新为USD基准
- ✅ 默认货币改为USD
- ✅ 自动转换CNY价格为USD
- ✅ 汇率显示格式更新
- ✅ 货币列表顺序调整（USD放第一）

---

## 🎊 完成状态

✅ **已完成** - 美元基准货币系统已全部更新

现在所有价格以**美元(USD)**为基准，支持实时转换为其他5种货币！

---

**立即体验新的美元基准系统！** 🚀

刷新页面或打开 `currency-test.html` 查看效果！

